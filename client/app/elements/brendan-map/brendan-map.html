<dom-module id="brendan-map">
  <style>
    google-map {
        height: 100%;
        width: 100%;
    }
  </style>

  <template>
    <iron-ajax
      auto
      id="routeAjax"
      url="/api/routes.json"
      handle-as="json"
      last-response="{{routes}}"
      debounce-duration="200"></iron-ajax>

    <iron-ajax
      auto
      id="stopsAjax"
      url="/api/stops.json"
      handle-as="json"
      last-response="{{stops}}"
      debounce-duration="200"></iron-ajax>

      <iron-ajax
        auto
        id="historyAjax"
        url="/api/history.json"
        handle-as="json"
        last-response="{{history}}"
        debounce-duration="200"></iron-ajax>

    <brendan-routes routes="{{routes}}" map="{{map}}"></brendan-routes>
    <brendan-stops stops="{{stops}}" map="{{map}}"></brendan-stops>

    <!-- Helps show what I used to have going on. -->
    <brendan-history history="{{history}}" map="{{map}}"><brendan-history>

    <google-map id="map" map="{{map}}"></google-map>

  </template>
</dom-module>

<script>
  Polymer({
    is: 'brendan-map',

    properties: {
      /**
       * The Google map object.
       *
       * @type google.maps.Map
       */
      map: Object,

      /**
       * Array of stops made.
       *
       * @type Array.<Flight>
       */
      stops: Array,

      /**
       * Array of routes driven.
       *
       * @type Array.<Route>
       */
      routes: Array,

      history: Object,

      /**
       * Brendan's current location
       *
       * @type LatLng
       */
      current: Object
    }
  });
</script>
